/**  
 * jQuery DreamyLiteBox Plugin
 * Version: 1.0
 * URL: https://github.com/andres314/dreamyLiteBox
 * Descripton: A super simple jQuery lite box
 * Requires: jQuery
 * Author: Andres (dreamsiteweb.com)
 *   gplus.to/andres_314
 *   bit.ly/apiLinkedin
 *   twitter.com/andres_314
 *   github.com/andres314
 *   
 * Copyright: Copyright (c) 2012 Andres Pi
 * License: MIT
 */
(function(c){var k=function(d,a,e){e.addClass("lbox lbox_"+a.opts.type);var b='<a id="close-lbox" class="icon-cross">Close</a>;<div class="lbox-content">;<input type="text" id="input-prompt-lbox">;<div id="confirm-lbox">;<button type="button" id="btn-accept" class="btn">Accept</button>;<button type="button" id="btn-cancel" class="btn">Cancel</button>;</div>'.split(";");"boolean"===typeof a.opts.title?b[7]=a.opts.title?'<h2 class="lbox-title">'+(d.val()?d.val():d.text())+"</h2>":"":"string"===typeof a.opts.title&&
(b[7]='<h2 class="lbox-title">'+a.opts.title+"</h2>");var h=a.opts.msg?a.opts.msg:"";b[4]=a.opts.useDefaultBtns?b[4]:"";b[5]=a.opts.useDefaultBtns?b[5]:"";switch(a.opts.type){case "alert":e.html(b[0]+b[7]+b[1]+h+b[6]+b[3]+b[4]+b[6]);c("#confirm-lbox .btn").click(function(){f(e,a)});a.opts.useDefaultSizeType&&(a.opts.width=250);break;case "confirm":e.html(b[0]+b[7]+b[1]+h+b[6]+b[3]+b[4]+b[5]+b[6]);c("#confirm-lbox .btn").click(function(){"Accept"==c(this).text()?c.isFunction(a.opts.callbackOnConfirm)&&
a.opts.callbackOnConfirm(d):c.isFunction(a.opts.callbackOnCancel)&&a.opts.callbackOnCancel(d);f(e,a)});break;case "prompt":e.html(b[0]+b[7]+b[1]+h+b[6]+b[2]+b[3]+b[4]+b[5]+b[6]);c.browser.msie&&8>c.browser.version&&c("#input-prompt-lbox").wrap('<div id="input-prompt-lbox-parent" />');c("#confirm-lbox .btn").click(function(){"Accept"==c(this).text()?c.isFunction(a.opts.callbackOnConfirm)&&a.opts.callbackOnConfirm(c("#input-prompt-lbox").val(),d):c.isFunction(a.opts.callbackOnCancel)&&a.opts.callbackOnCancel(d);
f(e,a)});a.opts.useDefaultSizeType&&(a.opts.width=530);break;default:a.opts.useDefaultBtns?e.html(b[0]+b[7]+b[1]+h+b[6]):e.html(b[0]+b[7]+b[1]+h+b[6]+b[3]+b[6]),"wait"==a.opts.type&&a.opts.useDefaultSizeType&&(a.opts.width=90,a.opts.height=24)}"object"===typeof a.opts.buttons&&null!==a.opts.buttons&&c.each(a.opts.buttons,function(a,b){b={click:b,text:a};c('<button type="button" class="btn" id="'+b.text.replace(/\s/g,"")+'">'+b.text+"</button>").click(function(){b.click.apply(d,arguments)}).appendTo("#confirm-lbox")});
e.css({width:a.opts.width,height:a.opts.height}).fadeIn();e.css({"margin-top":-(e.outerHeight()/2),"margin-left":-(e.outerWidth()/2)});c("body").append('<div id="fade" />');d.bg=c("#fade");d.bg.css("background",a.opts.bgColor).css("display","block").animate({opacity:a.opts.bg?0.75:0.001});if("wait"!=a.opts.type){var j=d.data("dreamyLiteBox"),g=j.lbox;c(document).bind("keydown.dreamyLiteBox",function(a){27===a.keyCode&&(a.preventDefault(),f(g,j))});c("alert"==j.opts.type?"#close-lbox":"#close-lbox, #fade").on("click",
function(){f(g,j)})}c.isFunction(a.opts.callbackOnOpen)&&a.opts.callbackOnOpen(d)},f=function(d,a){function e(){c("#fade, #close-lbox, #confirm-lbox").remove();d.removeClass()}"alert"==a.opts.type?(d.css("display","none"),e()):c("#fade , #dreamyLiteBox").fadeOut(function(){e()});c.isFunction(a.opts.callbackOnClose)&&a.opts.callbackOnClose($this);c(document).unbind("keydown.dreamyLiteBox");c("#close-lbox, #fade").off()},g={init:function(d){return this.each(function(){var a=c.extend({},c.fn.dreamyLiteBox.defaults,
d),e=c(this);c("#dreamyLiteBox").length||c("body").append('<div id="dreamyLiteBox" />');if("object"===typeof a.msg){var b=a.msg.clone();a.msg.remove();a.msg=b.html()}e.data("dreamyLiteBox")||e.data("dreamyLiteBox",{opts:a,lbox:c("#dreamyLiteBox"),target:e});"manual"!=a.event&&e.bind(a.event+".dreamyLiteBox",function(){k(e,e.data("dreamyLiteBox"),e.data("dreamyLiteBox").lbox)})})},destroy:function(){return this.each(function(){var d=c(this),a=d.data("dreamyLiteBox");d.unbind(".dreamyLiteBox");a.lbox.remove();
d.removeData("dreamyLiteBox")})},open:function(d){return this.each(function(){var a=c(this),e=a.data("dreamyLiteBox"),b=e.lbox;e.opts.msg=d?d:e.opts.msg;c.isFunction(e.opts.callbackBeforeOpen)&&e.opts.callbackBeforeOpen(a);k(a,e,b)})},close:function(){return this.each(function(){var d=c(this),a=d.data("dreamyLiteBox"),e=a.lbox;c.isFunction(a.opts.callbackBeforeClose)&&a.opts.callbackBeforeClose(d);f(e,a)})}};c.fn.dreamyLiteBox=function(d){if(g[d])return g[d].apply(this,Array.prototype.slice.call(arguments,
1));if("object"==typeof d||!d)return g.init.apply(this,arguments);c.error("Method "+d+" does not exist on jQuery.dreamyLiteBox")};c.fn.dreamyLiteBox.defaults={type:"modal",event:"click",title:!0,msg:!1,buttons:null,useDefaultBtns:!0,bg:!0,bgColor:"#000",useDefaultSizeType:!0,width:530,height:150,callbackOnConfirm:null,callbackOnCancel:null,callbackOnOpen:null,callbackOnClose:null,callbackBeforeOpen:null,callbackBeforeClose:null}})(jQuery);