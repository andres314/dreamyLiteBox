/**  
 * jQuery DreamyLiteBox Plugin
 * Version: 0.5
 * URL: https://github.com/andres314/dreamyLiteBox
 * Descripton: A super simple jQuery lite box
 * Requires: jQuery
 * Author: Andres (dreamsiteweb.com)
 *   gplus.to/andres_314
 *   bit.ly/apiLinkedin
 *   twitter.com/andres_314
 *   github.com/andres314
 *   
 * Copyright: Copyright (c) 2012 Andres Pi
 * License: MIT
 */
(function(c){var j=function(e,a,d){d.addClass("lbox lbox_"+a.opts.type);var b='<a id="close-lbox" class="icon-cross">Close</a>;<div class="lbox-content">;<input type="text" id="input-prompt-lbox">;<div id="confirm-lbox">;<button type="button" id="btn-accept" class="btn">Accept</button>;<button type="button" id="btn-cancel" class="btn">Cancel</button>;</div>'.split(";");"boolean"===typeof a.opts.title?b[7]=a.opts.title?'<h2 class="lbox-title">'+(e.val()?e.val():e.text())+"</h2>":"":"string"===typeof a.opts.title&&
(b[7]='<h2 class="lbox-title">'+a.opts.title+"</h2>");var h=a.opts.msg?a.opts.msg:"";b[4]=a.opts.useDefaultBtns?b[4]:"";b[5]=a.opts.useDefaultBtns?b[5]:"";switch(a.opts.type){case "alert":d.html(b[0]+b[7]+b[1]+h+b[6]+b[3]+b[4]+b[6]);c("#confirm-lbox .btn").click(function(){f(d,a)});a.opts.useDefaultSizeType&&(a.opts.width=250);break;case "confirm":d.html(b[0]+b[7]+b[1]+h+b[6]+b[3]+b[4]+b[5]+b[6]);c("#confirm-lbox .btn").click(function(){"Accept"==c(this).text()?c.isFunction(a.opts.callbackOnConfirm)&&
a.opts.callbackOnConfirm():c.isFunction(a.opts.callbackOnCancel)&&a.opts.callbackOnCancel();f(d,a)});break;case "prompt":d.html(b[0]+b[7]+b[1]+h+b[6]+b[2]+b[3]+b[4]+b[5]+b[6]);c.browser.msie&&8>c.browser.version&&c("#input-prompt-lbox").wrap('<div id="input-prompt-lbox-parent" />');c("#confirm-lbox .btn").click(function(){"Accept"==c(this).text()?c.isFunction(a.opts.callbackOnConfirm)&&a.opts.callbackOnConfirm(c("#input-prompt-lbox").val()):c.isFunction(a.opts.callbackOnCancel)&&a.opts.callbackOnCancel();
f(d,a)});a.opts.useDefaultSizeType&&(a.opts.width=530);break;default:a.opts.useDefaultBtns?d.html(b[0]+b[7]+b[1]+h+b[6]):d.html(b[0]+b[7]+b[1]+h+b[6]+b[3]+b[6]),"wait"==a.opts.type&&a.opts.useDefaultSizeType&&(a.opts.width=90,a.opts.height=24)}"object"===typeof a.opts.buttons&&null!==a.opts.buttons&&c.each(a.opts.buttons,function(a,b){b={click:b,text:a};c('<button type="button" class="btn" id="'+b.text.replace(/\s/g,"")+'">'+b.text+"</button>").click(function(){b.click.apply(e,arguments)}).appendTo("#confirm-lbox")});
d.css({width:a.opts.width,height:a.opts.height}).fadeIn();d.css({"margin-top":-(d.outerHeight()/2),"margin-left":-(d.outerWidth()/2)});c("body").append('<div id="fade" />');e.bg=c("#fade");e.bg.css("background",a.opts.bgColor).animate({opacity:a.opts.bg?0.75:0.001});if("wait"!=a.opts.type){var i=e.data("dreamyLiteBox"),g=i.lbox;c(document).bind("keydown.dreamyLiteBox",function(a){27===a.keyCode&&(a.preventDefault(),f(g,i))});c("alert"==i.opts.type?"#close-lbox":"#close-lbox, #fade").live("click",
function(){f(g,i)})}c.isFunction(a.opts.callbackOnOpen)&&a.opts.callbackOnOpen()},f=function(e,a){function d(){c("#fade, #close-lbox, #confirm-lbox").remove();e.removeClass()}"alert"==a.opts.type?(e.css("display","none"),d()):c("#fade , #dreamyLiteBox").fadeOut(function(){d()});c.isFunction(a.opts.callbackOnClose)&&a.opts.callbackOnClose();c(document).unbind("keydown.dreamyLiteBox");c("#close-lbox, #fade").die()},g={init:function(e){return this.each(function(){var a=c.extend({},c.fn.dreamyLiteBox.defaults,
e),d=c(this);c("#dreamyLiteBox").length||c("body").append('<div id="dreamyLiteBox" />');if("object"===typeof a.msg){var b=a.msg.clone();a.msg.remove();a.msg=b.html()}d.data("dreamyLiteBox")||d.data("dreamyLiteBox",{opts:a,lbox:c("#dreamyLiteBox"),target:d});"manual"!=a.event&&d.bind(a.event+".dreamyLiteBox",function(){j(d,d.data("dreamyLiteBox"),d.data("dreamyLiteBox").lbox)})})},destroy:function(){return this.each(function(){var e=c(this),a=e.data("dreamyLiteBox");e.unbind(".dreamyLiteBox");a.lbox.remove();
e.removeData("dreamyLiteBox")})},open:function(e){return this.each(function(){var a=c(this),d=a.data("dreamyLiteBox"),b=d.lbox;d.opts.msg=e?e:d.opts.msg;c.isFunction(d.opts.callbackBeforeOpen)&&d.opts.callbackBeforeOpen();j(a,d,b)})},close:function(){return this.each(function(){var e=c(this).data("dreamyLiteBox"),a=e.lbox;c.isFunction(e.opts.callbackBeforeClose)&&e.opts.callbackBeforeClose();f(a,e)})}};c.fn.dreamyLiteBox=function(e){if(g[e])return g[e].apply(this,Array.prototype.slice.call(arguments,
1));if("object"==typeof e||!e)return g.init.apply(this,arguments);c.error("Method "+e+" does not exist on jQuery.dreamyLiteBox")};c.fn.dreamyLiteBox.defaults={type:"modal",event:"click",title:!0,msg:!1,buttons:null,useDefaultBtns:!0,bg:!0,bgColor:"#000",useDefaultSizeType:!0,width:530,height:150,callbackOnConfirm:null,callbackOnCancel:null,callbackOnOpen:null,callbackOnClose:null,callbackBeforeOpen:null,callbackBeforeClose:null}})(jQuery);